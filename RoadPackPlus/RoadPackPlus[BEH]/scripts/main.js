import{world as m}from"@minecraft/server";var f={onUseOn(c){c.source,c.usedOnBlockPermutation}};m.beforeEvents.worldInitialize.subscribe(({itemComponentRegistry:c})=>{c.registerCustomComponent("hakomc:onuseon",f)});m.afterEvents.playerInteractWithBlock.subscribe(c=>{let n=c.player,a=c.beforeItemStack.typeId,r=a.split("_"),e=c.block.typeId.split("_"),i=c.block.location;if(!a.startsWith("hakomc:block_change_"))return;let s;switch(n.isSneaking?s="-":s="+",r[2]){case"num":let u=parseInt(r[3]);if(isNaN(u))return;if(e[1]==="cp"){let t=e[2]==="full"?16:parseInt(e[2]);if(isNaN(t))return;let o=b(t,u,s);l(e,i,n,o,2),n.onScreenDisplay.setActionBar(`${o}`)}else if(e[0]==="hakomc:gray"&&e[1]==="line"){let t=e[4]==="full"?16:parseInt(e[4]);if(isNaN(t))return;let o=b(t,u,s);l(e,i,n,o,4),n.onScreenDisplay.setActionBar(`${o}`)}break;case"rotate":if(e[0]==="hakomc:gray"&&e[2]==="slanting"){let t=e[3];switch(t){case"a":t=s==="+"?"c":"d";break;case"b":t=s==="+"?"d":"c";break;case"c":t=s==="+"?"b":"a";break;case"d":t=s==="+"?"a":"b";break}l(e,i,n,t,3)}else if(e[0]==="hakomc:gray"&&(e[2]==="thin"||e[2]==="thick")){let t=e[3];switch(t){case"a":t="b";break;case"b":t="a";break}l(e,i,n,t,3)}break;default:break}});function l(c,n,a,r,k){c[k]=r===16?"full":r.toString();let e=c.join("_");a.runCommand(`/setblock ${n.x} ${n.y} ${n.z} ${e}`)}function b(c,n,a){let r=a==="+"?c+n:c-n;return r===0?16:a==="+"?r>=17?r-16:r:r<0?r+16:r}
